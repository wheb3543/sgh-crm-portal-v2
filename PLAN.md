# خطة تطوير بوابة المستشفى السعودي الألماني (SGH-CRM-Portal)

**المطور:** علي (فريق آيديا)
**الهدف:** تنفيذ الخطة الاستراتيجية المتفق عليها لتحويل البوابة إلى منصة تسويق رقمي متكاملة وعالية الأداء.

---

## المرحلة صفر: التأسيس والترقية الهيكلية (Next.js Migration)

**الهدف:** بناء أساس تقني قوي ومستقبلي للمشروع من خلال الترحيل إلى Next.js لتمكين استراتيجية العرض الهجين (SSG/CSR).

| المهمة | الوصف التقني | المخرجات |
| :--- | :--- | :--- |
| **0.1 الترحيل إلى Next.js** | نقل الكود الحالي (React/TypeScript) من بيئة Vite إلى إطار عمل Next.js (يفضل استخدام App Router). | مشروع Next.js يعمل بنفس وظائف المشروع القديم. |
| **0.2 تحديث هيكل البيانات** | تعديل Drizzle Schema لإضافة جدول `offers` وتحديث جدول `leads` ليشمل حقول `sourceType` و `sourceId`. | ملفات Drizzle Schema محدثة وملف Migration جاهز للتطبيق. |
| **0.3 بناء أساسات النضج** | إعداد ملفات التكوين للاختبارات الآلية (Vitest/Jest) وتكوين GitHub Actions لـ CI/CD. | ملفات `vitest.config.ts` و `.github/workflows/ci.yml` جاهزة. |

---

## المرحلة الأولى: إطلاق حملة العروض (Offers Campaign)

**الأولوية:** الأولى (لتشغيل حملة عرض النساء والتوليد).
**الاستراتيجية:** SSG لصفحات الهبوط، CSR للوحة التحكم.

| الميزة | الوصف الوظيفي | الوصف التقني |
| :--- | :--- | :--- |
| **1.1 الصفحة الرئيسية** | إضافة زر "أحدث العروض" إلى الصفحة الرئيسية. | تعديل مكونات الصفحة الرئيسية (SSG). |
| **1.2 صفحة قائمة العروض** | صفحة تعرض جميع العروض النشطة (في البداية عرض الولادة). | صفحة `/offers` (SSG) تجلب البيانات من جدول `offers`. |
| **1.3 صفحة هبوط العرض** | صفحة مخصصة لكل عرض (مثل عرض الولادة) تحتوي على التفاصيل ونموذج تسجيل. | صفحة ديناميكية `/offers/[slug]` (SSG) مع نموذج تسجيل يرسل البيانات إلى جدول `leads` مع `sourceType='offer'`. |
| **1.4 إدارة العروض** | واجهة إدارية لإضافة، تعديل، وتفعيل/إلغاء تفعيل العروض. | إضافة مسار tRPC جديد لإدارة العروض في لوحة التحكم (CSR). |
| **1.5 تتبع العملاء** | عرض العملاء المسجلين من العروض في لوحة التحكم. | تحديث واجهة إدارة العملاء لعرض وتصفية العملاء حسب `sourceType='offer'`. |

---

## المرحلة الثانية: إطلاق حملة الأطباء (Doctors Campaign)

**الأولوية:** الثانية.
**الاستراتيجية:** SSG لصفحات الهبوط، CSR للوحة التحكم.

| الميزة | الوصف الوظيفي | الوصف التقني |
| :--- | :--- | :--- |
| **2.1 صفحة قائمة الأطباء** | صفحة تعرض الأطباء مع ميزات بحث وفلترة حسب التخصص. | صفحة `/doctors` (SSG) تجلب بيانات الأطباء. |
| **2.2 صفحة هبوط الطبيب** | صفحة مخصصة لكل طبيب مع سيرته الذاتية ونموذج حجز موعد. | صفحة ديناميكية `/doctors/[slug]` (SSG) مع نموذج حجز يرسل البيانات إلى جدول `leads` مع `sourceType='doctor'`. |
| **2.3 إدارة المواعيد** | تحسين واجهة إدارة المواعيد في لوحة التحكم. | تحديث مسارات tRPC وواجهة المستخدم لإدارة المواعيد المحجوزة من صفحات الأطباء. |

---

## المرحلة الثالثة: إطلاق حملة المخيمات الطبية (Camps Campaign)

**الأولوية:** الثالثة.
**الاستراتيجية:** SSG لصفحات الهبوط، CSR للوحة التحكم.

| الميزة | الوصف الوظيفي | الوصف التقني |
| :--- | :--- | :--- |
| **3.1 صفحة قائمة المخيمات** | صفحة تعرض المخيمات الحالية والقادمة. | صفحة `/camps` (SSG) تجلب بيانات المخيمات. |
| **3.2 صفحة هبوط المخيم** | صفحة مخصصة لكل مخيم مع تفاصيله ونموذج تسجيل. | صفحة ديناميكية `/camps/[slug]` (SSG) مع نموذج تسجيل يرسل البيانات إلى جدول `leads` مع `sourceType='camp'`. |
| **3.3 إدارة المسجلين** | واجهة إدارية لعرض وتصفية المسجلين في كل مخيم. | تحديث واجهة إدارة العملاء لعرض وتصفية العملاء حسب `sourceType='camp'`. |
